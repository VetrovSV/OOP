# Создание проекта на C в Visual Studio 2022

Visual Studio не предоставляет специальных шаблонов проекта для языка C, однако за основу можно взять проект на C++:

1. Создать пустой проект (Empty Project) на C++ для консоли
2. Добавить основной файл исходных кодов:
    - В окне обозревателя решений, кликнуть правой кнопкой мыши на названии проекта (на рис. проект называется c_lab )
    - В контекстном меню выбрать: Добавить > Создать элемент... > C++ файл
    - В появившемся окне добавления задать имя файла с расширением `.c`, например `main.c`

<img src="assets\VS_add_file.png" width=700>

3. В добавленном файле исходных кодов описать минимальную программу на языке C:

```c
  /// Главная функция программы
  int main() {

  }
```

4. Скомпилировать и запустить программу ( Ctrl + F5 )


Языки С и С++ во многом похожи, у них много общего в синтаксисе и в стандартных библиотеках. Однако есть и отличия. Если файл исходных кодов имеет расширение `c`, не `сpp` то Visual Studio будет воспринимать его как исходный код именно на C, не C++.

Например если в такой программе использовать ключевые слова (например `class`), то компиляция завершится с ошибкой.


# Hello, World!
Простая программа на C.
```c
// подключение (вставка) модуля для ввода и вывода
#include <stdio.h>

/// Главная функция программы
int main() {

	// вывод строки на экран
	printf("Hello, World!");


  return 0;
  // код возврата для ОС, принято что код возврата 0 означает, что программа завершилась без ошибок.
}
```


# Пример: ввод, вывод, вычисления
```c
#include <stdio.h>
#include <math.h>       // математический модуль
/* Автор: Иванов И.И.
 * Задача
 * Вычислить стоимость товара ценой s0, через t лет, если инфляция каждый год составляет p процентов
 */
int main() {

    // объявление и инициализация (задание начального значения) переменных
    // рекомендуется объявлять основные переменные в начале главной функции, если не требуется обратного
    float s0 = 0, s = 0;    // начальная цена, конечная цена
    unsigned t = 0;         // количество лет
    float p = 0;            // инфляция в процентах

    // вывод пояснения для пользователя
    printf("Вычислить стоимость товара ценой s0, через t лет, если инфляция каждый год составляет p процентов\n");
    // \n - обозначение символа перехода на новую строку
    printf("s0 = ");
    // считывания введённого значения в переменную s0, ожидается что пользователь введёт вещественное число ("%f")
    scanf( "%f", &s0 );

    printf("t = ");
    // считывания введённого значения в переменную s0, ожидается что пользователь введёт вещественное число ("%f")
    scanf( "%u", &t );

    printf("p = ");
    // считывания введённого значения в переменную s0, ожидается что пользователь введёт вещественное число ("%f")
    scanf( "%f", &p );

    // определим цену по формуле сложных процентов
    s = s0 * pow( 1 + p/100, t * 1);

    printf("Новая цена: %5.2f", s);
    // %5.2f -- формат вывода вещественного числа: 5 позиций на всё число, 2 знака после запятой

    return 0;
}
```

- справка по математическим функциям https://en.cppreference.com/w/c/numeric/math

- справка по стандартным модулям https://en.cppreference.com/w/c/header

- на случай, если возникают ошибки компиляции при обращении к математическим функциям  https://stackoverflow.com/questions/12824134/undefined-reference-to-pow-in-c-despite-including-math-h

# Пример: условный оператор
```c
#include <stdio.h>
#include <math.h>       // математический модуль

/* Автор:
 * Задача: https://ivtipm.github.io/Programming/Glava02/index02.htm#z59
 * Условие изменено: Определить, принадлежит ли точка закрашенной области ( окружность с центром в точке (1.2, 2.7) радиусом 5)
 */

int main() {

    float x0 = 1.2, y0 = 2.7;     // координаты центра окружности
    float r0 = 5.0;                // радиус окружности

    float x, y;             // координаты проверяемой точки
    float r;                // расстояние от данной точки, до центра окружности

    printf("Рассматривается окружность радиусом %2.2f с центром (%4.2f, %4.2f)\n", r0, x0, y0);
    printf("Введите координаты точки\n");

    printf("x = ");
    scanf("%f", &x);
    printf("y = ");
    scanf("%f", &y);

    // если точка принадлежит окружности, то расстояние между точкой и центром этой окружности будет не больше радиуса окружности
    // вычислим расстояние
    r = sqrt( pow(x-x0,2) + pow(y-y0,2) );      // sqrt - квадратный корень

    if ( r <= r0 )
        printf("точка принадлежит окружности");
    else
        printf("точка НЕ принадлежит окружности");
    return 0;
}
```

# Пример: циклы
```c
#include <stdio.h>
#include <math.h>       // математический модуль
/*
 * Автор:
 * Задача: Дано натуральное число n. Вычислить: 1/1 + 1/2 + 1/4 + ... + 1/(2^n)
 */

int main() {

    double sum = 0;      // для сохранения суммы
    double frac = 0;     // для хранения текущего слагаемого
    // выбран тип double, а не float потому, что в задаче придётся различать небольшие по модулю числа
    unsigned n = 0;

    printf("Заходит n математиков в бар. Нулевой математик заказывает литр пива, первый половину литра, третий четверть литра, .... \n");
    printf("n = \n");
    scanf("%u", &n);

    // каждое следующее слагаемое меньше предыдущего в 2 раза
    frac = 1;
    for (unsigned i = 0; i <= n; i++) {
        sum = sum + frac;
        frac = frac / 2.0;
    }

    printf("а бармен им говорит: вот вам %12.10f литров пива на всех", sum);

    return 0;
}

// справка по типам данных
// https://en.wikipedia.org/wiki/C_data_types
```

# Пример: массивы
```c
#include <stdio.h>
#include <math.h>       // математический модуль
#include <stdlib.h>
#include <time.h>

/*
 * Автор:
 * Задача: Даны натуральное число n, действительные числа a1,...,an.
 * Получить максимум из квадратов элементов: max (a1^2,...,an^2)
 */

int main() {

    srand( time( NULL) );                 // инициализация генератора случайных чисел текущим временем в секундах

    const unsigned N = 1024;        // максимальный размер массива
    float a[N];

    unsigned n = 0;

    printf("Даны натуральное число n (n < %d), действительные числа a1,...,an.\n", N);
    printf("Получить максимум из квадратов элементов: max (a1^2,...,an^2)\n");
    printf("Задайте количество элементов массива ( < %d)\n",N);
    scanf("%u", &n);

    // заполнение массива случайными числами от -100 до 100 включительно
    for (unsigned i = 0; i < n; ++i) {
        a[i] = 1.0 * rand() / RAND_MAX * 200 - 100;
        // домножение на 1.0 нужно для того, чтобы выражение вычислялось по правилам вещественной арифметики,
        // не целочисленной
        // rand() возвращает случайное челое число от 0 до RAND_MAX
    }


    printf("Исходные значения:\n");
    // вывод значений на экран в отдельном цикле, т.к. его в дальнейшем будет проще перенести в отдельную функцию
    for (unsigned i = 0; i < n; ++i) {
        printf( "%5.2f  ",a[i]);
        // todo: можно добавить условие для перехода на новую строку после вывода 10 элементов
        // так читать выведенные значения будет удобнее
    }

    printf("\n");

    // инициализируем начальное значение первым элементом из последовательности
    float max = a[0]*a[0];

    // поиск максимального квадрата
    for (unsigned i = 1; i < n; ++i)
        if ( a[i]*a[i] > max)
            max = a[i]*a[i];


    printf("max (a1^2,...,an^2) = %6.2f\n", max);
    printf("Это квадрат модуля числа  %5.2f\n", sqrt(max));     // для удобства проверки

    return 0;
}


// справка по модулю time http://cppstudio.com/cat/309/326/
// справка по функции rand https://ru.cppreference.com/w/c/numeric/random/rand

```

# Пример: вложенные циклы

# Пример: функции

# Пример: матрицы

# Пример: файлы


# Задачник
https://ivtipm.github.io/Programming/Files/spisocall.htm
